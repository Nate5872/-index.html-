# -index.html-
 package  org.komputing.kaptcha  นำเข้า kotlinx.coroutines.delay นำเข้า okhttp3.FormBody นำเข้า okhttp3.OkHttpClient นำเข้า okhttp3.Request นำเข้า java.io.IOException นำเข้า java.time.Duration  เปิด คลาส Captcha (     ส่วนตัว Val  hCaptchaSecret :  String ,      val  ส่วนตัวokHttpClient :  OkHttpClient ,     ส่วนตัว Val  postURL :  String ) {      ระงับ VerifyCaptcha สนุก  ( hCaptchaResponse : String ): บูลีน {          Valคำขอ= ขอ ผู้สร้าง ()             .url(โพสต์URL)             .header( " Content-Type " , " application/x-www-form-urlencoded " )             .โพสต์(                 ฟอร์มบอดี้ . ผู้สร้าง ()                     .add( "ตอบกลับ" , hCaptchaResponse)                     .add( "ความลับ" , hCaptchaSecret)                     .สร้าง()             )             .สร้าง()           ความพยายามvar =  0          ในขณะที่ ( จริง ) {              ลอง {                 valตอบกลับ= okHttpClient.newCall(request).execute()                 ถ้า (response.code ==  200 ) {                     return (response.body?.string()?.contains( " \" success \" :true " ) ==  true )                 }             } จับ (ioe :  IOException ) {                 //อาจเกิดขึ้น - เราจะลองอีกครั้ง             }              ถ้า (พยายาม==  3 ) คืนค่า false              ความพยายาม++             ล่าช้า ( 500L  *พยายาม)         }      }  }  ภายใน สนุก createDefaultOKhttp () =  OkHttpClient ผู้สร้าง ()     .connectTimeout( Duration .ofSeconds( 5 ))     .readTimeout( Duration .ofSeconds( 10 ))     .สร้าง()
